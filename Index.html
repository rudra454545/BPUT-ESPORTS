<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Fire Tournament Hub</title>
    <link rel="icon" type="image/jpeg" href="https://i.ibb.co/6g4PCd6/b713625a-00b7-41a0-b962-24da685bccc1.jpg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@400;500;700&family=Exo+2:wght@700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --transition-speed: 0.6s;
            --transition-ease: cubic-bezier(0.25, 1, 0.5, 1);
            
            /* Light Mode: Polar White & Grey Shades */
            --bg-main: #F7FAFC;
            --bg-card: rgba(255, 255, 255, 0.6);
            --text-dark: #1A202C;
            --text-light: #4A5568;
            --border-color: #E2E8F0;
            --accent-blue: #3B82F6;
            --accent-purple: #8B5CF6;
            --shadow-color: rgba(0,0,0,0.15);
        }

        html.dark {
            /* Dark Mode: Light-Bright Polar White-Grey mix */
            --bg-main: #374151; /* Lighter, cool grey background */
            --bg-card: rgba(15, 23, 42, 0.5);
            --text-dark: #E5E7EB;
            --text-light: #94A3B8;
            --border-color: #4B5563;
            --accent-blue: #60A5FA; /* Neon Navy Blue */
            --accent-purple: #A78BFA; /* Neon Violet */
            --shadow-color: rgba(0,0,0,0.5);
        }

        /* --- Base Styles --- */
        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-dark);
            overflow: hidden;
        }
        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        .font-exo { font-family: 'Exo 2', sans-serif; }

        /* --- Loader --- */
        #loader { position: fixed; inset: 0; z-index: 5000; background-color: var(--bg-main); display: flex; align-items: center; justify-content: center; transition: opacity 0.7s ease-out, visibility 0.7s ease-out; opacity: 1; }
        #loader.hidden { opacity: 0; visibility: hidden; }
        .loader-content { text-align: center; color: var(--text-dark); font-family: 'Orbitron', sans-serif; }
        .loader-logo { width: 150px; height: 150px; border: 5px solid transparent; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem; font-size: 4rem; font-weight: 900; color: var(--accent-blue); position: relative; animation: rotate-border 4s linear infinite; }
        .loader-logo::before, .loader-logo::after { content: ''; position: absolute; inset: -5px; border-radius: 50%; border: 5px solid transparent; }
        .loader-logo::before { border-top-color: var(--accent-purple); animation: rotate-border 4s linear infinite reverse; }
        .loader-logo::after { border-bottom-color: var(--text-light); animation: rotate-border 8s linear infinite; }
        @keyframes rotate-border { from { transform: rotate(360deg); } to { transform: rotate(0deg); } }
        .loader-text { font-size: 1.5rem; text-transform: uppercase; letter-spacing: 0.2em; opacity: 0; animation: fade-in-up 1s ease-out 0.5s forwards; }
        @keyframes fade-in-up { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Landing Page (NEW 3D Card Layout) --- */
        #landing-page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100%;
            gap: 1.5rem;
            padding: 2rem;
            perspective: 2500px;
            background: var(--bg-main);
            transition: opacity var(--transition-speed) ease-in-out, background-color 0.5s ease;
        }
        .landing-cards-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2vw;
            width: 100%;
        }
        .mode-section {
            position: relative;
            width: 45vw; /* Adjusted width */
            max-width: 600px; /* Max width for large screens */
            aspect-ratio: 12 / 9; /* Enforce 12:9 aspect ratio */
            border-radius: 1.5rem;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.6s var(--transition-ease), box-shadow 0.6s var(--transition-ease), filter 0.6s var(--transition-ease);
            transform-style: preserve-3d;
            box-shadow: 0 20px 40px -15px var(--shadow-color);
            border: 1px solid var(--border-color);
        }
        .mode-section .bg-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            object-fit: cover;
            transform: scale(1.1);
            filter: grayscale(80%) brightness(0.7);
            transition: filter 0.5s ease, transform 0.5s ease;
            pointer-events: none;
        }
        .mode-section .content {
            position: absolute;
            inset: 0;
            z-index: 3;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 2rem;
            background: rgba(0,0,0,0.3);
            backdrop-filter: blur(1px);
        }
        .mode-section h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(1.5rem, 6vw, 4.5rem);
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: color 0.5s ease, text-shadow 0.5s ease;
            color: #fff;
            text-shadow: 0 0 10px rgba(0,0,0,0.7);
        }
        .mode-section .tagline { font-family: 'Exo 2', font-size: clamp(1rem, 2vw, 1.25rem); margin-top: 1rem; color: #fff; }
        
        /* New Hover/Split/3D Effect */
        .landing-cards-container:hover .mode-section {
             box-shadow: 0 25px 50px -12px var(--shadow-color);
        }
        .landing-cards-container:hover #cs-section {
            transform: translateX(-5%) rotateY(-6deg);
        }
        .landing-cards-container:hover #br-section {
            transform: translateX(5%) rotateY(6deg);
        }
        .mode-section:hover {
            transform: translateZ(60px) scale(1.05) !important;
            box-shadow: 0 30px 60px -10px var(--shadow-color);
        }
        .landing-cards-container:hover .mode-section:not(:hover) {
            filter: brightness(0.6); /* Shade effect */
            transform: scale(0.98);
        }
        .mode-section:hover .bg-video {
            filter: grayscale(0%) brightness(1);
            transform: scale(1.15);
        }
        #cs-section:hover h2 { color: var(--accent-blue); text-shadow: 0 0 15px var(--accent-blue); }
        #br-section:hover h2 { color: var(--accent-purple); text-shadow: 0 0 15px var(--accent-purple); }

        /* New Cyberpunk Buttons */
        .landing-buttons-container {
            display: flex;
            gap: 2rem;
            margin-top: -1rem; /* Pulls buttons up slightly */
            z-index: 20;
        }
        .cyber-btn {
            border: 3px solid;
            padding: 17px 40px;
            font-size: 18px;
            font-weight: bold;
            background: none;
            perspective: 1000px;
            transition: all 0.8s;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        .cyber-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 200%;
            height: 100%;
            z-index: -1;
            transform-origin: 0 0;
            transition: transform 0.8s;
            transform: rotateX(90deg);
        }
        .cyber-btn:hover {
            color: #0a0a0a;
            background: transparent;
            border: none;
            padding: 20px 40px;
        }
        .cyber-btn:hover::before { transform: rotateX(0deg); }
        .cyber-btn::after {
            content: 'Â»';
            display: inline-block;
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%) rotate(0deg);
            width: 15px;
            height: 15px;
            transition: right 0.8s, transform 0.8s;
            filter: blur(1px);
            opacity: 0;
        }
        .cyber-btn:hover::after { right: 10px; opacity: 1; }
        .cyber-btn:active {
            transform: scale(0.96);
        }
        /* CS Button Colors */
        .cyber-btn.cs-btn { color: var(--accent-blue); }
        .cyber-btn.cs-btn::before { background: linear-gradient(90deg, var(--accent-blue), #60a5fa); }
        .cyber-btn.cs-btn:hover { box-shadow: 0 0 20px var(--accent-blue), 0 0 40px var(--accent-blue), 0 0 80px var(--accent-blue); }
        /* BR Button Colors */
        .cyber-btn.br-btn { color: var(--accent-purple); }
        .cyber-btn.br-btn::before { background: linear-gradient(90deg, var(--accent-purple), #c084fc); }
        .cyber-btn.br-btn:hover { box-shadow: 0 0 20px var(--accent-purple), 0 0 40px var(--accent-purple), 0 0 80px var(--accent-purple); }

        .center-title { position: absolute; top: 2%; left: 50%; transform: translateX(-50%); z-index: 10; text-align: center; pointer-events: none; }
        .center-title h1 { font-family: 'Orbitron'; font-size: clamp(1.5rem, 4vw, 3rem); font-weight: 900; text-transform: uppercase; color: var(--text-dark); }
        html.dark .center-title h1 { color: var(--accent-purple); text-shadow: 0 0 10px var(--accent-purple); }
        
        .quotes-container { position: absolute; bottom: 15%; left: 2rem; transform: none; z-index: 10; text-align: left; pointer-events: none; width: 40%; }
        .quote { font-family: 'Exo 2'; font-style: italic; font-size: clamp(0.8rem, 1.2vw, 1rem); color: var(--text-light); position: absolute; width: 100%; left: 0; opacity: 0; transition: opacity 1s ease-in-out; }
        .quote.active { opacity: 1; }
        #landing-page.fade-out { opacity: 0; pointer-events: none; }
        .landing-footer { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); z-index: 10; text-align: center; }
        .landing-footer p { font-size: 0.75rem; }
        .top-left-controls { position: absolute; top: 20px; left: 20px; z-index: 10; }
        .top-right-controls { position: absolute; top: 20px; right: 20px; z-index: 10; display: flex; gap: 0.5rem; align-items: center; }
        .control-button { background: var(--bg-card); backdrop-filter: blur(5px); border: 1px solid var(--border-color); color: var(--text-light); width: 40px; height: 40px; border-radius: 50%; transition: all 0.3s ease; }
        .control-button:hover { background: var(--text-light); color: var(--bg-main); }
        .bput-badge { background: var(--bg-card); backdrop-filter: blur(5px); border: 1px solid var(--border-color); color: var(--text-dark); width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-family: 'Orbitron'; font-weight: 900; }
        
        /* Volume Slider Styling */
        .volume-container { position: relative; }
        .volume-slider { -webkit-appearance: none; width: 100px; height: 5px; background: var(--border-color); border-radius: 5px; outline: none; transition: opacity 0.3s ease, visibility 0.3s ease; opacity: 0; visibility: hidden; position: absolute; right: 110%; top: 50%; transform: translateY(-50%); }
        .volume-container.visible .volume-slider { opacity: 1; visibility: visible; }
        .volume-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 15px; height: 15px; background: var(--text-light); border-radius: 50%; cursor: pointer; }
        .volume-slider::-moz-range-thumb { width: 15px; height: 15px; background: var(--text-light); border-radius: 50%; cursor: pointer; }

        /* --- Leaderboard View & Other Styles --- */
        #leaderboard-view { position: fixed; inset: 0; z-index: 100; opacity: 0; visibility: hidden; background-color: var(--bg-main); transition: opacity var(--transition-speed) ease-in-out, visibility var(--transition-speed) ease-in-out, background-color 0.5s ease; overflow-y: auto; }
        #leaderboard-view.visible { opacity: 1; visibility: visible; }
        .back-button { position: fixed; top: 20px; left: 20px; z-index: 1001; background: var(--bg-card); backdrop-filter: blur(5px); border: 1px solid var(--border-color); color: var(--text-dark); width: 40px; height: 40px; border-radius: 50%; font-size: 1.5rem; transition: all 0.3s ease; }
        .back-button:hover { background: var(--text-dark); color: var(--bg-main); transform: scale(1.1); }
        ::-webkit-scrollbar { width: 8px; } ::-webkit-scrollbar-track { background: var(--border-color); } ::-webkit-scrollbar-thumb { background-color: var(--text-light); border-radius: 10px; border: 2px solid var(--border-color); }
        .leaderboard-row { transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out; cursor: pointer; perspective: 500px; }
        .leaderboard-row:hover { transform: scale(1.02) translateZ(10px); box-shadow: 0 10px 20px var(--shadow-color); z-index: 10; }
        .rank-1 { background: linear-gradient(135deg, #fef08a, #fde047); border-left-color: #facc15; color: #713f12; }
        .rank-2 { background: linear-gradient(135deg, #e5e7eb, #d1d5db); border-left-color: #9ca3af; color: #374151; }
        .rank-3 { background: linear-gradient(135deg, #fcd34d, #fbbf24); border-left-color: #f59e0b; color: #78350f; }
        html.dark .rank-1 { background: linear-gradient(135deg, #4a3a0a 0%, #a4821a 50%, #4a3a0a 100%); border-left-color: #FFD700; color: var(--text-dark); }
        html.dark .rank-2 { background: linear-gradient(135deg, #3e4347 0%, #8c969d 50%, #3e4347 100%); border-left-color: #C0C0C0; color: var(--text-dark); }
        html.dark .rank-3 { background: linear-gradient(135deg, #5c3d28 0%, #b87333 50%, #5c3d28 100%); border-left-color: #CD7F32; color: var(--text-dark); }
        .br-live-banner { font-family: 'Orbitron', sans-serif; font-weight: 900; font-size: 2.5rem; text-transform: uppercase; color: var(--accent-purple); }
        .qualified-badge { display: inline-block; margin-left: 10px; background-color: #10B981; color: white; font-family: 'Orbitron', sans-serif; font-weight: 900; font-size: 0.8rem; padding: 2px 8px; border-radius: 4px; vertical-align: middle; }
        .scroller { overflow: hidden; perspective: 1000px; }
        .scroller__inner { display: flex; flex-wrap: nowrap; gap: 2rem; width: max-content; }
        .scroller:hover .scroller__inner { animation-play-state: paused; }
        .leader-scroller .scroller__inner { animation: scroll-leaders 40s linear infinite; }
        @keyframes scroll-leaders { to { transform: translate(calc(-50% - 1rem)); } }
        #map-scroller .scroller__inner { transition: transform 0.8s cubic-bezier(0.65, 0, 0.35, 1); }
        .map-card { transition: transform 0.4s ease, opacity 0.4s ease; transform: scale(0.9); opacity: 0.7; width: 300px; height: 450px; background-size: cover; background-position: center; border-radius: 1rem; border: 1px solid var(--border-color); position: relative; overflow: hidden; flex-shrink: 0; box-shadow: 0 10px 15px -3px var(--shadow-color); }
        .map-card.is-active { transform: scale(1.05); opacity: 1; }
        .map-card::after { content: ''; position: absolute; inset: 0; background: linear-gradient(to top, rgba(26,32,44,0.9) 0%, rgba(26,32,44,0.5) 50%, transparent 100%); z-index: 1; }
        .map-card-content { position: absolute; bottom: 0; left: 0; right: 0; padding: 1.5rem; z-index: 3; color: white; }
        .match-badge { position: absolute; top: 1rem; right: 1rem; z-index: 3; }
        .kill-leader-card { width: 180px; height: 200px; background-color: var(--bg-card); backdrop-filter: blur(10px); border: 1px solid var(--border-color); border-radius: 1rem; padding: 1rem; flex-shrink: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; position: relative; transform-style: preserve-3d; transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1), box-shadow 0.5s ease; box-shadow: 0 10px 15px -3px var(--shadow-color); }
        .kill-leader-card:hover { transform: translateZ(30px) rotateY(15deg); box-shadow: 0 25px 50px -12px var(--shadow-color); }
        .crown { font-size: 1.75rem; position: absolute; top: -15px; left: 50%; transform: translateX(-50%); }
        .crown-gold { color: #facc15; } .crown-silver { color: #9ca3af; } .crown-bronze { color: #f59e0b; }
        .player-icon-bg { width: 50px; height: 50px; margin-bottom: 0.5rem; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: linear-gradient(145deg, var(--bg-main), var(--border-color)); box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); }
        .player-icon { color: var(--text-light); width: 25px; height: 25px; }
        .player-name { font-weight: 900; font-size: 1.1rem; line-height: 1.1; word-break: break-all; margin-bottom: 0.25rem; }
        .text-gold-glow { color: #ca8a04; } .text-silver-glow { color: #6b7280; } .text-bronze-glow { color: #d97706; } .text-cyan-glow { color: #0891b2; } .text-fuchsia-glow { color: #c026d3; }
        #player-stats-modal-overlay { position: fixed; inset: 0; z-index: 2000; background: rgba(10, 10, 20, 0.6); backdrop-filter: blur(8px) saturate(150%); display: flex; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1), visibility 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        #player-stats-modal-overlay.active { opacity: 1; visibility: visible; }
        #player-stats-modal { background-color: var(--bg-main); border: 1px solid var(--border-color); box-shadow: 0 25px 50px -12px var(--shadow-color); border-radius: 1rem; width: 90%; max-width: 600px; color: var(--text-dark); transform: scale(0.9) translateY(20px); opacity: 0; transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1), border-color 0.3s ease; }
        #player-stats-modal-overlay.active #player-stats-modal { transform: scale(1) translateY(0); opacity: 1; }
        #player-stats-modal:hover { border-color: var(--accent-blue); }
        .modal-player-row { opacity: 0; transform: translateX(-20px); animation: slide-in 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
        @keyframes slide-in { to { opacity: 1; transform: translateX(0); } }
        .role-icon { font-size: 1.1rem; margin-right: 0.5rem; width: 20px; text-align: center; display: inline-block; }
        .matchup-card, .final-match-card { background-color: var(--bg-card); border: 1px solid var(--border-color); backdrop-filter: blur(10px); border-radius: 1rem; padding: 2rem; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: space-between; transition: all 0.4s ease; cursor: pointer; box-shadow: 0 10px 15px -3px var(--shadow-color); flex-shrink: 0; width: 400px; }
        .matchup-card:hover, .final-match-card:hover { transform: translateY(-10px) rotateX(5deg) scale(1.03); box-shadow: 0 25px 50px -12px var(--shadow-color); border-color: var(--accent-blue); }
        .matchup-team { font-family: 'Orbitron', sans-serif; font-size: 1.5rem; font-weight: 900; text-align: center; flex: 1; }
        .vs-glow { font-size: 3rem; font-weight: 900; color: var(--text-dark); }
        #match-details-modal-overlay { position: fixed; inset: 0; z-index: 3000; background: rgba(10, 10, 20, 0.6); backdrop-filter: blur(8px) saturate(150%); display: flex; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: opacity 0.4s ease, visibility 0.4s ease; }
        #match-details-modal-overlay.active { opacity: 1; visibility: visible; }
        #match-details-modal { background-color: var(--bg-main); border: 1px solid var(--border-color); border-radius: 1rem; width: 90%; max-width: 800px; text-align: center; transform: scale(0.9); opacity: 0; transition: transform 0.4s ease, opacity 0.4s ease; }
        #match-details-modal-overlay.active #match-details-modal { transform: scale(1); opacity: 1; }
        .live-button { display: inline-block; margin-top: 1.5rem; padding: 0.75rem 2.5rem; background: #ef4444; color: white; font-family: 'Orbitron'; text-transform: uppercase; border-radius: 50px; transition: all 0.3s ease; }
        .live-button:hover { background: #dc2626; transform: scale(1.05); box-shadow: 0 0 20px rgba(239, 68, 68, 0.5); }
        .live-button .fa-youtube { margin-right: 0.5rem; }
        
        /* --- Badge Styles --- */
        .player-badge { display: inline-flex; align-items: center; justify-content: center; width: 1.5rem; height: 1.5rem; border-radius: 50%; margin-right: 0.5rem; font-size: 0.8rem; vertical-align: middle; }
        .badge-semifinalist { background: linear-gradient(135deg, var(--accent-purple), #c084fc); color: white; box-shadow: 0 0 12px var(--accent-purple); animation: mvp-pulse 1.8s infinite; }
        .badge-diamond { background: #b9f2ff; color: #0c4a6e; box-shadow: 0 0 8px #b9f2ff; }
        .badge-gold { background: #FFD700; color: #78350f; box-shadow: 0 0 8px #FFD700; }
        .badge-silver { background: #C0C0C0; color: #4b5563; box-shadow: 0 0 8px #C0C0C0; }
        .badge-bronze { background: #CD7F32; color: #78350f; box-shadow: 0 0 8px #CD7F32; }
        .badge-default { background: var(--text-light); color: var(--bg-main); }
        .badge-mvp { background: #ef4444; color: #fff; box-shadow: 0 0 8px #ef4444; animation: mvp-pulse 1.5s infinite; }
        @keyframes mvp-pulse { 0% { transform: scale(1); box-shadow: 0 0 8px var(--accent-purple); } 50% { transform: scale(1.1); box-shadow: 0 0 16px var(--accent-purple); } 100% { transform: scale(1); box-shadow: 0 0 8px var(--accent-purple); } }
        
        /* Semi-Finals Fade Effect */
        #semi-final-cards-container { position: relative; width: 100%; max-width: 500px; height: 250px; }
        #semi-final-cards-container .matchup-card { position: absolute; top: 0; left: 0; width: 100%; height: 100%; transition: opacity 0.8s ease-in-out; }
        #semi-final-cards-container .matchup-card:not(.active) { opacity: 0; pointer-events: none; }

        /* Final Match Card Player Lists */
        .final-match-card .final-player-list { font-size: 0.75rem; text-align: left; margin-top: 1rem; list-style: none; padding-left: 0; }
        .final-match-card .final-player-list li { margin-bottom: 0.25rem; display: flex; align-items: center; }
        .final-match-card .final-player-list .player-badge { width: 1rem; height: 1rem; font-size: 0.6rem; margin-right: 0.25rem; }

        /* Player Stat Card */
        .player-stat-card {
            background-color: var(--bg-card);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 1rem;
            padding: 1rem;
            transform-style: preserve-3d;
            transition: transform 0.5s var(--transition-ease), box-shadow 0.5s ease;
        }
        .player-stat-card:hover {
            transform: translateZ(20px) rotateY(5deg);
            box-shadow: 0 20px 40px -10px var(--shadow-color);
        }

        /* Reveal Animation */
        .reveal-on-scroll { opacity: 0; transform: translateY(50px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .reveal-on-scroll.revealed { opacity: 1; transform: translateY(0); }
        
        /* Dark Mode Table & Text Colors */
        html.dark .leaderboard-row:not(.rank-1):not(.rank-2):not(.rank-3) { background-color: var(--bg-card); border-left-color: var(--accent-blue); }
        html.dark .leaderboard-row td:nth-child(2) { color: var(--accent-purple); font-weight: 700; transition: all 0.3s ease; }
        html.dark .leaderboard-row:hover td:nth-child(2) { color: #fff; text-shadow: 0 0 8px var(--accent-purple); }
        html.dark h1, html.dark h2 { color: var(--accent-purple); text-shadow: 0 0 5px var(--accent-purple); }
    </style>
</head>
<body>
    <!-- Loader -->
    <div id="loader">
        <div class="loader-content">
            <div class="loader-logo">B</div>
            <div class="loader-text">BPUT E-Sports</div>
        </div>
    </div>
    
    <!-- Main Landing Page -->
    <main id="landing-page">
        <audio id="background-audio" loop>
            <source src="https://res.cloudinary.com/dqh7olosv/video/upload/v1753927171/35a0-8af6-42b3-9f52-4fa5834621e6_yeq3wv.mp3" type="audio/mpeg">
        </audio>
        <div class="top-left-controls"><div class="bput-badge">B</div></div>
        <div class="top-right-controls">
            <div class="volume-container">
                <button id="sound-toggle" class="control-button"><i class="fas fa-volume-mute"></i></button>
                <input type="range" id="volume-slider" class="volume-slider" min="0" max="1" step="0.05" value="0.5">
            </div>
            <button id="theme-toggle" class="control-button"><i class="fas fa-sun"></i></button>
        </div>
        <div class="center-title"><h1>BPUT E-Sports Tournament</h1></div>
        
        <div class="landing-cards-container">
            <section id="cs-section" class="mode-section">
                <iframe class="bg-video" src="https://player.cloudinary.com/embed/?cloud_name=dqh7olosv&public_id=1753923088060_zzuumi&profile=cld-default&autoplay=true&loop=true&show_logo=false&controls=false&muted=true&aspect_ratio=16:9&gravity=center&crop=fill" allow="autoplay; fullscreen; encrypted-media; picture-in-picture" allowfullscreen frameborder="0"></iframe>
                <div class="content"><h2>Clash<br>Squad</h2><p class="tagline">4v4 Fast-Paced Combat</p></div>
            </section>
            <section id="br-section" class="mode-section">
                 <iframe class="bg-video" src="https://player.cloudinary.com/embed/?cloud_name=dqh7olosv&public_id=1753923870811_f31nl9&profile=cld-default&autoplay=true&loop=true&show_logo=false&controls=false&muted=true&aspect_ratio=16:9&gravity=center&crop=fill" allow="autoplay; fullscreen; encrypted-media; picture-in-picture" allowfullscreen frameborder="0"></iframe>
                <div class="content"><h2>Battle<br>Royale</h2><p class="tagline">The Ultimate Survival Challenge</p></div>
            </section>
        </div>

        <div class="landing-buttons-container">
            <button id="cs-view-btn" class="cyber-btn cs-btn">CS Standings</button>
            <button id="br-view-btn" class="cyber-btn br-btn">BR Standings</button>
        </div>

        <div class="quotes-container"><p id="quotes-text" class="quote active"></p></div>
        <footer class="landing-footer">
            <p class="text-sm" style="color: var(--text-light);">Last Updated: <span id="last-updated"></span></p>
            <p class="text-xs mt-1" style="color: var(--text-light);">Designed by <a href="https://www.instagram.com/rudraprasad._?igsh=MXV4bjZ2eWtlcXpsdg==" target="_blank" rel="noopener noreferrer" class="hover:text-blue-400 transition-colors">rudraprasad._</a></p>
        </footer>
    </main>

    <!-- Leaderboard View -->
    <div id="leaderboard-view">
        <button id="back-button" class="back-button"><i class="fas fa-arrow-left"></i></button>
        <div id="cs-view" class="hidden">
            <div class="w-full max-w-7xl mx-auto p-4">
                <header class="text-center my-8"><h1 class="font-orbitron text-4xl md:text-6xl font-black uppercase tracking-wider">CS Tournament Standings</h1></header>
                <div class="bg-bg-card backdrop-blur-sm border border-border-color rounded-2xl shadow-lg overflow-hidden mb-16"><div class="overflow-x-auto"><table class="w-full text-text-dark"><thead class="bg-gray-100 dark:bg-gray-800"><tr class="text-left"><th class="p-3 font-orbitron text-sm uppercase tracking-widest text-text-light">Rank</th><th class="p-3 font-orbitron text-sm uppercase tracking-widest text-text-light">Team</th><th class="p-3 font-orbitron text-sm uppercase tracking-widest text-text-light text-center">Booyah</th><th class="p-3 font-orbitron text-sm uppercase tracking-widest text-text-light text-center">Loss</th><th class="p-3 font-orbitron text-sm uppercase tracking-widest text-text-light text-center hidden sm:table-cell">W/L(Rounds)</th><th class="p-3 font-orbitron text-sm uppercase tracking-widest text-text-light text-center">Kills</th><th class="p-3 font-orbitron text-sm uppercase tracking-widest text-text-light text-center">K/R Ratio</th></tr></thead><tbody id="cs-leaderboard-body" class="text-text-dark"></tbody></table></div></div>
                
                <section id="cs-player-stats-section" class="mb-16 reveal-on-scroll">
                    <header class="text-center mb-12"><h2 class="font-orbitron text-4xl md:text-5xl font-black uppercase tracking-wider">Player Statistics</h2></header>
                    <div id="cs-player-stats-container" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
                        <!-- Player cards will be injected here -->
                    </div>
                </section>

                <section id="cs-finals-section" class="mb-16 reveal-on-scroll">
                    <header class="text-center mb-12"><h2 class="font-orbitron text-4xl md:text-5xl font-black uppercase tracking-wider">Grand Finals (Best of 3)</h2></header>
                    <div class="scroller leader-scroller" id="cs-finals-scroller">
                        <div id="cs-finals-container" class="scroller__inner"></div>
                    </div>
                </section>

                <section id="cs-semifinal-section" class="mb-16 reveal-on-scroll">
                    <header class="text-center mb-12"><h2 class="font-orbitron text-4xl md:text-5xl font-black uppercase tracking-wider">Semi Finals</h2></header>
                    <div class="flex justify-center">
                        <div id="semi-final-cards-container">
                            <div class="matchup-card active" data-match-id="sf1">
                                <div class="text-center w-full">
                                    <p class="font-orbitron text-lg font-bold text-yellow-400 mb-2">Semi Final 1</p>
                                    <div class="flex items-center justify-around">
                                        <div class="matchup-team text-cyan-500">BRBO</div>
                                        <div class="vs-glow">VS</div>
                                        <div class="matchup-team text-green-500">Team Survive</div>
                                    </div>
                                </div>
                            </div>
                            <div class="matchup-card" data-match-id="sf2">
                                <div class="text-center w-full">
                                    <p class="font-orbitron text-lg font-bold text-yellow-400 mb-2">Semi Final 2</p>
                                    <div class="flex items-center justify-around">
                                        <div class="matchup-team text-yellow-500">Team Exclusive</div>
                                        <div class="vs-glow">VS</div>
                                        <div class="matchup-team text-green-500">Team Survive</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="mb-16"><header class="text-center mb-8"><h2 class="font-orbitron text-4xl md:text-5xl font-black uppercase tracking-wider">CS Kill Leaders</h2></header><div class="scroller leader-scroller" id="cs-kill-leaders-scroller"><div id="cs-kill-leaders-container" class="scroller__inner"></div></div></section>
            </div>
        </div>
        <div id="br-view" class="hidden">
            <div class="w-full max-w-7xl mx-auto p-4">
                <header class="text-center my-8"><h1 class="font-orbitron text-4xl md:text-6xl font-black uppercase tracking-wider">BR Tournament Standings</h1><p class="br-live-banner mt-2">BR Tournament Is Live</p></header>
                <div class="bg-bg-card backdrop-blur-sm border border-border-color rounded-2xl shadow-lg overflow-hidden"><div class="overflow-x-auto"><table class="w-full text-text-dark"><thead class="bg-gray-100 dark:bg-gray-800"><tr class="text-left"><th class="p-3 font-orbitron text-sm uppercase tracking-widest text-text-light">Rank</th><th class="p-3 font-orbitron text-sm uppercase tracking-widest text-text-light">Team</th><th class="p-3 font-orbitron text-sm uppercase tracking-widest text-text-light text-center">Booyah</th><th class="p-3 font-orbitron text-sm uppercase tracking-widest text-text-light text-center">Kill Points</th><th class="p-3 font-orbitron text-sm uppercase tracking-widest text-text-light text-center">Position</th><th class="p-3 font-orbitron text-sm uppercase tracking-widest text-text-light text-center">Pos. Points</th><th class="p-3 font-orbitron text-sm uppercase tracking-widest text-text-light text-center">Total Points</th></tr></thead><tbody id="br-leaderboard-body" class="text-text-dark"></tbody></table></div></div>
                <section class="mt-16"><header class="text-center mb-8"><h2 class="font-orbitron text-4xl md:text-5xl font-black uppercase tracking-wider">Match Highlights</h2></header><div class="scroller" id="map-scroller"><div class="scroller__inner" id="map-highlights-container"></div></div></section>
                <section class="my-16"><header class="text-center mb-8"><h2 class="font-orbitron text-4xl md:text-5xl font-black uppercase tracking-wider">BR Kill Leaders</h2></header><div class="scroller leader-scroller" id="br-kill-leaders-scroller"><div id="br-kill-leaders-container" class="scroller__inner"></div></div></section>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="player-stats-modal-overlay">
        <div id="player-stats-modal"><div class="p-4 sm:p-6 border-b border-border-color relative"><h2 id="modal-team-name" class="font-orbitron text-2xl sm:text-3xl font-bold text-center">Team Name</h2><button id="modal-close-btn" class="absolute top-3 right-4 text-text-light hover:text-text-dark transition-colors text-2xl">&times;</button></div><div class="p-4 sm:p-6"><table class="w-full"><thead><tr class="border-b border-border-color"><th class="p-3 text-left font-orbitron text-sm uppercase tracking-widest text-text-light">Name/IGN</th><th class="p-3 text-center font-orbitron text-sm uppercase tracking-widest text-text-light">Role</th><th class="p-3 text-right font-orbitron text-sm uppercase tracking-widest text-text-light">Kills</th><th class="p-3 text-right font-orbitron text-sm uppercase tracking-widest text-text-light">K/R</th></tr></thead><tbody id="modal-player-stats-body"></tbody></table></div></div>
    </div>
    <div id="match-details-modal-overlay">
        <div id="match-details-modal">
            <!-- Content will be injected by JS -->
        </div>
    </div>

    <script>
        // --- DATA ---
        const createPlayers = () => Array(5).fill(null).map((_, i) => ({ ign: `Player ${i+1}`, role: 'N/A', kills: 0, roundsPlayed: 0 }));
        const csTeamData = [ { name: 'Barsha Ranira Bhiga Odhani', booyah: 3, loss: 1, winRounds: 24, lossRounds: 17, kills: 110, players: [ { ign: 'Rajesh', role: 'IGL', kills: 26 + 6, roundsPlayed: 41 }, { ign: 'Rinku', role: 'Rusher', kills: 25 + 4, roundsPlayed: 41 }, { ign: 'Amrit', role: 'Rusher/Supporter', kills: 31 + 5, roundsPlayed: 41 }, { ign: 'Anirudh', role: 'Rusher', kills: 15 + 15, roundsPlayed: 41 }, { ign: 'Babroo', role: 'Supporter', kills: 13, roundsPlayed: 41 }, ]}, { name: 'Team Exclusive', booyah: 2, loss: 2, winRounds: 20, lossRounds: 17, kills: 93, players: [ { ign: 'Rudra', role: 'Rusher/Supporter', kills: 16 + 1 + 9, roundsPlayed: 37 }, { ign: 'Aditya', role: 'Rusher', kills: 25 + 1 + 8, roundsPlayed: 37 }, { ign: 'Sovan', role: 'Sniper', kills: 28 + 4 + 8, roundsPlayed: 37 }, { ign: 'Chiku', role: 'IGL', kills: 23 + 3 + 6, roundsPlayed: 37 }, { ign: 'Player 5', role: 'N/A', kills: 0, roundsPlayed: 0 }, ]}, { name: 'Team Survive', booyah: 4, loss: 0, winRounds: 28, lossRounds: 13, kills: 114, players: [ { ign: 'Ashirbad', role: 'Rusher', kills: 26 + 9, roundsPlayed: 41 }, { ign: 'Dibya', role: 'IGL', kills: 35 + 8, roundsPlayed: 41 }, { ign: 'Mohit', role: 'Rusher', kills: 33 + 8, roundsPlayed: 41 }, { ign: 'Nihar', role: 'Rusher/Supporter', kills: 7, roundsPlayed: 41 }, { ign: 'Amit', role: 'Supporter', kills: 13 + 5, roundsPlayed: 41 }, ]}, { name: 'Bengali Warriors', booyah: 2, loss: 2, winRounds: 18, lossRounds: 30, kills: 87, players: createPlayers() }, { name: 'Utkal Warriors', booyah: 2, loss: 2, winRounds: 23, lossRounds: 19, kills: 104, players: [ { ign: 'Anup', role: 'Rusher/Sniper', kills: 28 + 6 + 12, roundsPlayed: 42 }, { ign: 'Pritam', role: 'Rusher', kills: 22 + 4 + 7, roundsPlayed: 42 }, { ign: 'Chandan', role: 'IGL', kills: 30 + 0 + 6, roundsPlayed: 42 }, { ign: 'Swapnil', role: 'Supporter/Flanker', kills: 26 + 1 + 6, roundsPlayed: 42 }, { ign: 'Player 5', role: 'N/A', kills: 0, roundsPlayed: 0 }, ]}, { name: 'Team Phoenix', booyah: 0, loss: 4, winRounds: 13, lossRounds: 28, kills: 76, players: [ { ign: 'RAHUL', role: 'IGL / SNIPER', kills: 20, roundsPlayed: 41 }, { ign: 'OSH !!', role: 'RUSHHER', kills: 24, roundsPlayed: 41 }, { ign: 'Mr.Arpitt', role: 'ASSAULTER', kills: 7, roundsPlayed: 41 }, { ign: 'Srikanta', role: 'RUSHHER', kills: 13, roundsPlayed: 41 }, { ign: 'Sushobhan', role: 'ASSAULTER', kills: 10, roundsPlayed: 41 }, ]}, { name: 'Venom Ragers', booyah: 1, loss: 3, winRounds: 11, lossRounds: 21, kills: 65, players: createPlayers() }, ];
        
        // UPDATED BR DATA
        const brTeamData = [ 
            { name: 'Barsha Ranira Bhiga Odhani', positions: '1/1/6/1/4/2/1/1', killPoints: 63, positionPoints: 81, players: [ { ign: 'Rajesh', role: 'IGL', kills: 7 }, { ign: 'Rinku', role: 'Rusher', kills: 12 }, { ign: 'Amrit', role: 'Rusher/Supporter', kills: 7 }, { ign: 'Anirudh', role: 'Rusher', kills: 8 }, { ign: 'Babroo', role: 'Supporter', kills: 0 }, ]}, 
            { name: 'Bengali Warriors', positions: '3/2/5/3/5/3/2/7', killPoints: 23, positionPoints: 58, players: createPlayers() }, 
            { name: 'Team Exclusive', positions: '2/5/3/7/7/7/7/3', killPoints: 32, positionPoints: 47, players: [ { ign: 'Rudra', role: 'Rusher/Supporter', kills: 0 }, { ign: 'Aditya', role: 'Rusher', kills: 7 }, { ign: 'Sovan', role: 'Sniper', kills: 9 }, { ign: 'Chiku', role: 'IGL', kills: 6 }, { ign: 'Player 5', role: 'N/A', kills: 0 }, ]}, 
            { name: 'Team Phoenix', positions: '6/4/7/6/1/1/6/4', killPoints: 27, positionPoints: 57, players: [ { ign: 'RAHUL', role: 'IGL / SNIPER', kills: 2 }, { ign: 'OSH !!', role: 'RUSHHER', kills: 0 }, { ign: 'Mr.Arpitt', role: 'ASSAULTER', kills: 1 }, { ign: 'Srikanta', role: 'RUSHHER', kills: 1 }, { ign: 'Sushobhan', role: 'ASSAULTER', kills: 0 }, ]}, 
            { name: 'Team Survive', positions: '5/6/4/4/2/6/5/2', killPoints: 35, positionPoints: 55, players: [ { ign: 'Ashirbad', role: 'Rusher', kills: 3 }, { ign: 'Dibya', role: 'IGL', kills: 3 }, { ign: 'Mohit', role: 'Rusher', kills: 7 }, { ign: 'Nihar', role: 'Rusher/Supporter', kills: 0 }, { ign: 'Amit', role: 'Supporter', kills: 0 }, ]}, 
            { name: 'Utkal Warriors', positions: '5/6/4/4/3/4/3/5', killPoints: 25, positionPoints: 54, players: [ { ign: 'Anup', role: 'Rusher/Sniper', kills: 1 }, { ign: 'Pritam', role: 'Rusher', kills: 5 }, { ign: 'Chandan', role: 'IGL', kills: 1 }, { ign: 'Swapnil', role: 'Supporter/Flanker', kills: 6 }, { ign: 'Player 5', role: 'N/A', kills: 0 }, ]}, 
            { name: 'Venom Ragers', positions: '7/3/1/2/6/5/4/6', killPoints: 19, positionPoints: 56, players: createPlayers() }, 
        ].map(team => ({
            ...team,
            booyah: (team.positions.match(/1/g) || []).length
        }));

        const mapData = [ 
            { matchNumber: 1, name: 'Bermuda', img: 'https://i.pinimg.com/1200x/1d/73/da/1d73da971832b610cc566e53dc74648e.jpg', booyah: 'BRBO', kills: 16, mvp: { name: 'BG RAJ', kills: 17, team: 'BRBO' } }, 
            { matchNumber: 2, name: 'Purgatory', img: 'https://i.pinimg.com/1200x/2c/2a/0e/2c2a0ee607b09c77cf9a03e627dcfe6b.jpg', booyah: 'BRBO', kills: 9, mvp: { name: 'ARJIT', kills: null, team: 'BW' } }, 
            { matchNumber: 3, name: 'Kalahari', img: 'https://i.pinimg.com/1200x/49/09/04/490904e353f6d7d76ed01d4363ef53c9.jpg', booyah: 'Venom Ragers', kills: 7, mvp: { name: 'SWAPNIL', kills: null, team: 'UW' } }, 
            { matchNumber: 4, name: 'Nexterra', img: 'https://i.pinimg.com/1200x/6d/b3/43/6db343601d464a5c7028f0643be3b6a0.jpg', booyah: 'BRBO', kills: 8, mvp: { name: 'RYLâ¡RINKU', kills: null, team: 'BRBO' } }, 
            { matchNumber: 5, name: 'Bermuda', img: 'https://i.pinimg.com/1200x/1d/73/da/1d73da971832b610cc566e53dc74648e.jpg', booyah: 'Team Phoenix', kills: 13 }, 
            { matchNumber: 6, name: 'Purgatory', img: 'https://i.pinimg.com/1200x/2c/2a/0e/2c2a0ee607b09c77cf9a03e627dcfe6b.jpg', booyah: 'Team Phoenix', kills: 8 }, 
            { matchNumber: 7, name: 'Kalahari', img: 'https://i.pinimg.com/1200x/49/09/04/490904e353f6d7d76ed01d4363ef53c9.jpg', booyah: 'Barsha Ranira Bhiga Odhani', kills: 6 }, 
            { matchNumber: 8, name: 'Nexterra', img: 'https://i.pinimg.com/1200x/6d/b3/43/6db343601d464a5c7028f0643be3b6a0.jpg', booyah: 'Barsha Ranira Bhiga Odhani', kills: 15 }, 
            { matchNumber: 9, name: 'Bermuda', img: 'https://i.pinimg.com/1200x/1d/73/da/1d73da971832b610cc566e53dc74648e.jpg' }, 
            { matchNumber: 10, name: 'Purgatory', img: 'https://i.pinimg.com/1200x/2c/2a/0e/2c2a0ee607b09c77cf9a03e627dcfe6b.jpg' }, 
            { matchNumber: 11, name: 'Kalahari', img: 'https://i.pinimg.com/1200x/49/09/04/490904e353f6d7d76ed01d4363ef53c9.jpg' }, 
            { matchNumber: 12, name: 'Nexterra', img: 'https://i.pinimg.com/1200x/6d/b3/43/6db343601d464a5c7028f0643be3b6a0.jpg' }, 
        ];
        let csKillLeaders = [];
        let brKillLeaders = [];
        const matchDetailsData = {
            '1': { title: "BRBO Won", replayLink: "https://www.youtube.com/live/6KwRXOGBC3E?si=547-ZbB2NLcnZ9wj", teams: { teamA: { name: "Barsha Ranira Bhiga Odhani", players: [ { name: "Anirudh", kills: 15, dmg: 4267 }, { name: "Rajesh", kills: 6, dmg: 2912 }, { name: "Amrit", kills: 5, dmg: 2770 }, { name: "Rinku", kills: 4, dmg: 3156 } ] }, teamB: { name: "Utkal Warriors", players: [ { name: "Anup", kills: 6, dmg: 4876 }, { name: "Pritam", kills: 4, dmg: 2260 }, { name: "Swapnil", kills: 1, dmg: 1582 }, { name: "Chandan", kills: 0, dmg: 1266 } ] } } },
            '2': { title: "Team Survive Won By 7-1", replayLink: "https://youtube.com/@bg_raj_17_live?si=-ZkrtXszMHSpVzk0", teams: { teamA: { name: "Team Survive", players: [ { name: "Ashirbad", kills: 9, dmg: 2426 }, { name: "Mohit", kills: 8, dmg: 3850 }, { name: "Dibya", kills: 8, dmg: 3328 }, { name: "Amit", kills: 5, dmg: 2047 } ] }, teamB: { name: "Team Exclusive", players: [ { name: "Sovan", kills: 4, dmg: 3857 }, { name: "Chiku", kills: 3, dmg: 2484 }, { name: "Aditya", kills: 1, dmg: 2217 }, { name: "Rudra", kills: 1, dmg: 2105 } ] } } },
            '3': { title: "Team Exclusive Won By 7-6", tag: "Do or Die Match", replayLink: "https://www.youtube.com/live/kjig76NwyBw?si=P0HlrWxTWgGeS5re", teams: { teamA: { name: "Team Exclusive", players: [ { name: "Rudra", kills: 9, dmg: 4242 }, { name: "Aditya", kills: 8, dmg: 5623 }, { name: "Sovan", kills: 8, dmg: 5569 }, { name: "Chiku", kills: 6, dmg: 3144 } ] }, teamB: { name: "Utkal Warriors", players: [ { name: "Anup", kills: 12, dmg: 5896 }, { name: "Pritam", kills: 7, dmg: 3462 }, { name: "Chandan", kills: 6, dmg: 3851 }, { name: "Swapnil", kills: 6, dmg: 3633 } ] } } },
            'sf1': { 
                title: "BRBO Won By 7-1", 
                winner: "Barsha Ranira Bhiga Odhani",
                replayLink: "https://www.youtube.com/live/qKcfZ-p0xuU?si=VS1jFgCzKbKNpDsc",
                teams: { 
                    teamA: { name: "Barsha Ranira Bhiga Odhani", players: [ { name: "Rajesh", kda: "5/2/3", dmg: 4003 }, { name: "Anirudh", kda: "6/2/7", dmg: 3685 }, { name: "Amrit", kda: "5/2/5", dmg: 1169 }, { name: "Rinku", kda: "6/2/3", dmg: 1900 } ] }, 
                    teamB: { name: "Team Survive", players: [ { name: "Dibya", kda: "0/7/3", dmg: 1870 }, { name: "Nihal", kda: "3/7/2", dmg: 2228 }, { name: "Ashirbad", kda: "2/7/2", dmg: 2126 }, { name: "Mukesh", kda: "3/7/1", dmg: 1813 } ] } 
                } 
            },
            'sf2': { 
                title: "Team Exclusive Won By 7-6", 
                winner: "Team Exclusive",
                replayLink: "https://www.youtube.com/live/gGit7IAPh8A?si=xniN0FETzP0OmLhL",
                teams: { 
                    teamA: { name: "Team Exclusive", players: [ { name: "Aditya", kda: "12/7/10", dmg: 4117 }, { name: "Chiku", kda: "9/7/10", dmg: 3963 }, { name: "Sovan", kda: "8/7/12", dmg: 5629 }, { name: "Rudra", kda: "5/9/10", dmg: 3226 } ] }, 
                    teamB: { name: "Team Survive", players: [ { name: "Dibya", kda: "12/7/7", dmg: 5720 }, { name: "Ashirbad", kda: "6/9/7", dmg: 4115 }, { name: "Mohit", kda: "6/8/9", dmg: 3665 }, { name: "Mukesh", kda: "6/10/6", dmg: 3219 } ] } 
                } 
            }
        };
        const csPlayerStats = [
          // BRBO
          { ign: 'Amrit', team: 'BRBO', kills: 67, deaths: 44 },
          { ign: 'Rajesh', team: 'BRBO', kills: 63, deaths: 36 },
          { ign: 'Anirudh', team: 'BRBO', kills: 63, deaths: 27 },
          { ign: 'Rinku', team: 'BRBO', kills: 56, deaths: 43 },
          { ign: 'Babroo', team: 'BRBO', kills: 13, deaths: 11 },
          // Team Exclusive
          { ign: 'Sovan', team: 'TE', kills: 64, deaths: 64 },
          { ign: 'Aditya', team: 'TE', kills: 64, deaths: 66 },
          { ign: 'Chiku', team: 'TE', kills: 41, deaths: 48 },
          { ign: 'Rudra', team: 'TE', kills: 39, deaths: 61 },
          // Utkal Warriors
          { ign: 'Anup', team: 'UW', kills: 46, deaths: 45 },
          { ign: 'Chandan', team: 'UW', kills: 36, deaths: 42 },
          { ign: 'Swapnil', team: 'UW', kills: 33, deaths: 53 },
          { ign: 'Pritam', team: 'UW', kills: 33, deaths: 43 },
          // Venom Ragers
          { ign: 'Vivek', team: 'VR', kills: 20, deaths: 25 },
          { ign: 'Tanmay', team: 'VR', kills: 17, deaths: 27 },
          { ign: 'Suvam', team: 'VR', kills: 16, deaths: 18 },
          { ign: 'Sachin', team: 'VR', kills: 11, deaths: 26 },
          { ign: 'Viper', team: 'VR', kills: 1, deaths: 8 },
        ];

        // --- JS Functions ---
        function getRoleIcon(role) { const l=role.toLowerCase(); let t=""; if(l.includes("sniper")) t+='<i class="fa-solid fa-crosshairs role-icon" title="Sniper"></i>'; if(l.includes("igl")) t+='<i class="fa-solid fa-crown role-icon" title="IGL"></i>'; if(l.includes("rusher") || l.includes("assaulter")) t+='<i class="fa-solid fa-bolt role-icon" title="Rusher/Assaulter"></i>'; if(l.includes("supporter")) t+='<i class="fa-solid fa-shield-halved role-icon" title="Supporter"></i>'; if(l.includes("flanker")) t+='<i class="fa-solid fa-user-secret role-icon" title="Flanker"></i>'; return t||"N/A"; }
        function getRankClass(rank) { if(rank===1) return 'rank-1'; if(rank===2) return 'rank-2'; if(rank===3) return 'rank-3'; return ''; }
        function getPlayerBadgeHtml(playerName, teamRank, isSemifinalist) {
            if (isSemifinalist) {
                return '<span class="player-badge badge-semifinalist" title="Semifinalist"><i class="fas fa-star-half-alt"></i></span>';
            }
            const csRank = csKillLeaders.findIndex(p => p.ign === playerName) + 1;
            const brRank = brKillLeaders.findIndex(p => p.ign === playerName) + 1;
            if (csRank > 0 && csRank <= 5 && brRank > 0 && brRank <= 5) {
                return '<span class="player-badge badge-diamond" title="Top 5 in CS & BR"><i class="fas fa-gem"></i></span>';
            }
            const rank = csRank > 0 ? csRank : brRank;
            if (rank > 0 && rank <= 3) {
                if (rank === 1) return '<span class="player-badge badge-gold" title="Top 3 Killer"><i class="fas fa-medal"></i></span>';
                if (rank === 2) return '<span class="player-badge badge-silver" title="Top 3 Killer"><i class="fas fa-medal"></i></span>';
                if (rank === 3) return '<span class="player-badge badge-bronze" title="Top 3 Killer"><i class="fas fa-medal"></i></span>';
            }
            return `<span class="player-badge badge-default" title="Player"><i class="fas fa-user"></i></span>`;
        }
        function showPlayerStatsModal(teamData, teamRank) { const modalOverlay=document.getElementById("player-stats-modal-overlay"), teamNameEl=document.getElementById("modal-team-name"), playerStatsBody=document.getElementById("modal-player-stats-body"); if(!modalOverlay||!teamNameEl||!playerStatsBody) return; teamNameEl.textContent=teamData.name; playerStatsBody.innerHTML=""; const sortedPlayers=[...teamData.players].sort((a,b)=>b.kills-a.kills); const isSemifinalist = teamRank <= 4; sortedPlayers.forEach((player,index)=>{ const row=document.createElement("tr"); row.className="modal-player-row border-t border-border-color"; row.style.animationDelay=`${index*0.07}s`; const badgeHtml = getPlayerBadgeHtml(player.ign, teamRank, isSemifinalist); const kr = player.roundsPlayed > 0 ? (player.kills / player.roundsPlayed).toFixed(2) : "N/A"; row.innerHTML=`<td class="p-3 font-semibold text-base flex items-center">${badgeHtml}<span>${player.ign}</span></td><td class="p-3 text-center text-text-light text-sm">${getRoleIcon(player.role)} ${player.role}</td><td class="p-3 text-right font-bold text-lg text-accent-blue">${player.kills}</td><td class="p-3 text-right font-bold text-lg text-accent-purple">${kr}</td>`; playerStatsBody.appendChild(row); }); modalOverlay.classList.add("active"); }
        function processAndDisplayLeaderboard(tbodyId, teamData, isCS) {
            const tbody = document.getElementById(tbodyId);
            if (!tbody) return;
            let processedData;
            if (isCS) {
                processedData = teamData.map(e => ({...e, krRatio: ((e.winRounds + e.lossRounds) > 0 ? e.kills / (e.winRounds + e.lossRounds) : 0).toFixed(2)})).sort((a, b) => b.booyah - a.booyah || b.winRounds - a.winRounds || b.krRatio - a.krRatio);
            } else {
                processedData = teamData.map(e => ({...e, totalPoints: (e.killPoints || 0) + (e.positionPoints || 0)})).sort((a, b) => b.totalPoints - a.totalPoints || b.killPoints - a.killPoints || b.booyah - a.booyah);
            }
            tbody.innerHTML = "";
            processedData.forEach((team, index) => {
                const rank = index + 1;
                const row = document.createElement("tr");
                row.className = `leaderboard-row border-l-8 ${getRankClass(rank)} border-t border-border-color`;
                const qualifiedBadge = rank <= 4 && isCS ? '<span class="qualified-badge">Q</span>' : "";
                let rowContent;
                if(isCS) {
                    rowContent = `<td class="p-3 font-black text-2xl text-center align-middle">${rank}</td><td class="p-3 font-bold text-lg align-middle">${team.name} ${qualifiedBadge}</td><td class="p-3 text-center font-semibold text-green-600 dark:text-green-400 text-lg align-middle">${team.booyah}</td><td class="p-3 text-center font-semibold text-red-600 dark:text-red-400 text-lg align-middle">${team.loss}</td><td class="p-3 text-center font-semibold text-gray-600 dark:text-gray-400 text-lg hidden sm:table-cell align-middle">[${team.winRounds}/${team.lossRounds}]</td><td class="p-3 text-center font-bold text-xl text-purple-600 dark:text-purple-400 align-middle">${team.kills}</td><td class="p-3 text-center font-bold text-lg text-cyan-600 dark:text-cyan-400 align-middle">${team.krRatio}</td>`;
                } else {
                    rowContent = `<td class="p-3 font-black text-2xl text-center align-middle">${rank}</td><td class="p-3 font-bold text-lg align-middle">${team.name}</td><td class="p-3 text-center font-semibold text-green-600 dark:text-green-400 text-lg align-middle">${team.booyah||0}</td><td class="p-3 text-center font-semibold text-cyan-600 dark:text-cyan-400 text-lg align-middle">${team.killPoints||0}</td><td class="p-3 text-center font-semibold text-gray-600 dark:text-gray-400 text-lg align-middle">${team.positions||"-"}</td><td class="p-3 text-center font-semibold text-blue-600 dark:text-blue-400 text-lg align-middle">${team.positionPoints||0}</td><td class="p-3 text-center font-bold text-xl text-yellow-500 dark:text-yellow-400 align-middle">${team.totalPoints}</td>`;
                }
                row.innerHTML = rowContent;
                row.addEventListener("click", () => showPlayerStatsModal(team, rank));
                tbody.appendChild(row);
            });
        }
        function createMapHighlights() { const container=document.getElementById("map-highlights-container"); if(!container) return; container.innerHTML=""; mapData.forEach(map=>{ const card=document.createElement("div"); card.className="map-card"; card.style.backgroundImage=`url('${map.img}')`; let mvpHtml=map.mvp?`<div class="pt-2"><p class="font-bold text-yellow-400 text-xl">MVP</p><p class="font-semibold">${map.mvp.name} (${map.mvp.team})</p>${map.mvp.kills?`<p class="font-semibold text-sm text-gray-300">Kills: ${map.mvp.kills}</p>`:""}</div>`:""; card.innerHTML=`<div class="match-badge"><span class="bg-cyan-500/80 backdrop-blur-sm text-white font-orbitron font-bold text-sm py-1 px-3 rounded-full shadow-lg border border-cyan-400/50">MATCH ${map.matchNumber}</span></div><div class="map-card-content"><h3 class="font-orbitron text-3xl font-bold uppercase tracking-wider">${map.name}</h3><div class="mt-4 space-y-2 text-lg"><p><span class="font-bold text-green-400">Booyah:</span> <span class="font-semibold">${map.booyah||""}</span></p><p><span class="font-bold text-red-400">Kills:</span> <span class="font-semibold">${map.kills||""}</span></p>${mvpHtml}</div></div>`; container.appendChild(card); }); }
        function createKillLeaderCards(data, containerId) { const container=document.getElementById(containerId); if(!container) return; container.innerHTML=""; data.forEach((player,i)=>{ const rank=i+1; let crownHtml="", nameClass=""; if(rank===1){crownHtml='<i class="fas fa-crown crown crown-gold"></i>'; nameClass="text-gold-glow";} else if(rank===2){crownHtml='<i class="fas fa-crown crown crown-silver"></i>'; nameClass="text-silver-glow";} else if(rank===3){crownHtml='<i class="fas fa-crown crown crown-bronze"></i>'; nameClass="text-bronze-glow";} else if(rank===4){nameClass="text-cyan-glow";} else if(rank===5){nameClass="text-fuchsia-glow";} const card=document.createElement("div"); card.className="kill-leader-card relative"; const kr = player.roundsPlayed > 0 ? (player.totalKills / player.roundsPlayed).toFixed(2) : "N/A"; card.innerHTML=`${crownHtml}<div class="player-icon-bg"><svg class="player-icon" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path></svg></div><h3 class="player-name font-exo ${nameClass}">${player.ign}</h3><p class="text-xs text-text-light">(${player.teamName})</p><div class="text-left mt-2 text-xs w-full"><p class="flex justify-between items-center"><strong class="text-red-500 font-bold">Kills:</strong> <span class="font-semibold">${player.totalKills}</span></p><p class="flex justify-between items-center"><strong class="text-purple-500 font-bold">K/R:</strong> <span class="font-semibold">${kr}</span></p></div>`; container.appendChild(card); }); }
        function calculateKillLeaders() { const allCsPlayers=csTeamData.flatMap(team=>team.players.map(p=>({...p,teamName:team.name,totalKills:p.kills}))); const allBrPlayers=brTeamData.flatMap(team=>team.players.map(p=>({...p,teamName:team.name,totalKills:p.killPoints}))); csKillLeaders=allCsPlayers.sort((a,b)=>b.totalKills-a.totalKills).slice(0,10); brKillLeaders=allBrPlayers.sort((a,b)=>b.totalKills-a.totalKills).slice(0,10); }
        function setupPausingScroller(scrollerId) { const scroller=document.getElementById(scrollerId); if(!scroller) return; const inner=scroller.querySelector(".scroller__inner"); if(!inner||inner.children.length===0) return; const originalCards=Array.from(inner.children); originalCards.forEach(card=>inner.appendChild(card.cloneNode(true))); let currentIndex=0; let timeoutId; function advance() { const cards=Array.from(inner.children); const activeCard=cards[currentIndex]; const scrollAmount=activeCard.offsetLeft+activeCard.offsetWidth/2-scroller.offsetWidth/2; inner.style.transform=`translateX(-${scrollAmount}px)`; cards.forEach(c=>c.classList.remove("is-active")); activeCard.classList.add("is-active"); currentIndex++; if(currentIndex>=originalCards.length) { setTimeout(()=>{ inner.style.transition="none"; currentIndex=0; const resetScrollAmount=cards[0].offsetLeft+cards[0].offsetWidth/2-scroller.offsetWidth/2; inner.style.transform=`translateX(-${resetScrollAmount}px)`; setTimeout(()=>{inner.style.transition="transform 0.8s cubic-bezier(0.65, 0, 0.35, 1)"},50); },800); } timeoutId=setTimeout(advance,2500); } advance(); scroller.addEventListener("mouseenter",()=>clearTimeout(timeoutId)); scroller.addEventListener("mouseleave",()=>timeoutId=setTimeout(advance,2500)); }
        function setupContinuousScroller(containerId) { const container=document.getElementById(containerId); if(!container||container.children.length===0) return; const originalCards=Array.from(container.children); originalCards.forEach(card=>{ const clone=card.cloneNode(true); clone.setAttribute("aria-hidden",true); container.appendChild(clone); }); }
        function updateTimestamp() { const timestampEl=document.getElementById("last-updated"); if(!timestampEl) return; const now=new Date(); timestampEl.textContent=now.toLocaleString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZone:"Asia/Kolkata",hour12:true}); }
        function setupModalListeners() { const playerModal=document.getElementById("player-stats-modal-overlay"), closeBtn=document.getElementById("modal-close-btn"); if(playerModal) playerModal.addEventListener("click",e=>{if(e.target===playerModal) playerModal.classList.remove("active");}); if(closeBtn) closeBtn.addEventListener("click",()=>playerModal.classList.remove("active")); const matchModal=document.getElementById("match-details-modal-overlay"), matchModalContent=document.getElementById("match-details-modal"); if(matchModal) matchModal.addEventListener("click",e=>{if(e.target===matchModal) matchModal.classList.remove("active");}); document.querySelectorAll('.matchup-card, .final-match-card').forEach(card => { card.addEventListener('click', () => { const matchId = card.dataset.matchId; const details = matchDetailsData[matchId]; const csRanks = csTeamData.map(t => t.name); if (details && details.teams) { const findMvp = (players) => { if (!players || players.length === 0 || !players[0].kda) return { name: '', kda: '0/0/0' }; return players.reduce((mvp, player) => (parseInt(player.kda.split('/')[0]) > parseInt(mvp.kda.split('/')[0])) ? player : mvp, players[0]); }; const teamAMvp = findMvp(details.teams.teamA.players); const teamBMvp = findMvp(details.teams.teamB.players); const teamARank = csRanks.indexOf(details.teams.teamA.name) + 1; const teamBRank = csRanks.indexOf(details.teams.teamB.name) + 1; const generatePlayerRows = (players, mvp, teamRank) => players.map(p => `<tr><td class="p-2 text-left flex items-center">${mvp && p.name === mvp.name ? '<span class="player-badge badge-mvp" title="Match MVP"><i class="fas fa-star"></i></span>' : getPlayerBadgeHtml(p.name, teamRank, teamRank <= 4)}<span>${p.name}</span></td><td class="p-2 text-center">${p.kda}</td><td class="p-2 text-center">${p.dmg}</td></tr>`).join(''); const generateUpcomingPlayerRows = (players, teamRank) => players.map(p => `<tr><td class="p-2 text-left flex items-center">${getPlayerBadgeHtml(p.ign, teamRank, teamRank <= 4)}<span>${p.ign}</span></td><td class="p-2 text-center">${getRoleIcon(p.role)}</td></tr>`).join(''); if (details.liveLink || matchId.startsWith('final')) { matchModalContent.innerHTML = `<div class="p-4"><div class="text-center mb-4"><span class="text-green-500 font-bold uppercase tracking-widest">${details.liveLink ? "Starting Soon" : "Upcoming"}</span><h3 class="font-orbitron text-2xl mt-2">${details.title}</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-left"><div class="team-a"> <h4 class="font-bold text-lg text-cyan-600 mb-2">${details.teams.teamA.name}</h4><table class="w-full text-sm"><thead><tr class="border-b border-border-color"><th class="p-2 text-left">Name</th><th class="p-2 text-center">Role</th></tr></thead><tbody>${generateUpcomingPlayerRows(details.teams.teamA.players, teamARank)}</tbody></table></div><div class="team-b"><h4 class="font-bold text-lg text-red-600 mb-2">${details.teams.teamB.name}</h4><table class="w-full text-sm"><thead><tr class="border-b border-border-color"><th class="p-2 text-left">Name</th><th class="p-2 text-center">Role</th></tr></thead><tbody>${generateUpcomingPlayerRows(details.teams.teamB.players, teamBRank)}</tbody></table></div></div>${details.liveLink ? `<a href="${details.liveLink}" target="_blank" rel="noopener noreferrer" class="live-button"><i class="fab fa-youtube"></i> Watch Live</a>` : ''}</div>`; } else { matchModalContent.innerHTML = `<div class="p-4"><div class="text-center mb-4"><span class="text-red-500 font-bold uppercase tracking-widest">${details.tag || "Match Ended"}</span><h3 class="font-orbitron text-2xl mt-2">${details.title}</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-left"><div class="team-a"> <h4 class="font-bold text-lg text-cyan-600 mb-2">${details.teams.teamA.name}</h4><table class="w-full text-sm"><thead><tr class="border-b border-border-color"><th class="p-2 text-left">Name</th><th class="p-2 text-center">K/D/A</th><th class="p-2 text-center">Dmg</th></tr></thead><tbody>${generatePlayerRows(details.teams.teamA.players, teamAMvp, teamARank)}</tbody></table></div><div class="team-b"><h4 class="font-bold text-lg text-red-600 mb-2">${details.teams.teamB.name}</h4><table class="w-full text-sm"><thead><tr class="border-b border-border-color"><th class="p-2 text-left">Name</th><th class="p-2 text-center">K/D/A</th><th class="p-2 text-center">Dmg</th></tr></thead><tbody>${generatePlayerRows(details.teams.teamB.players, teamBMvp, teamBRank)}</tbody></table></div></div><a href="${details.replayLink}" target="_blank" rel="noopener noreferrer" class="live-button"><i class="fab fa-youtube"></i> Watch Replay</a></div>`; } } if(matchModal) matchModal.classList.add('active'); }); }); }
        function createFinalsCards() {
            const container = document.getElementById('cs-finals-container');
            if (!container) return;
            container.innerHTML = ''; // Clear existing content
            const finalTeamA_name = matchDetailsData.sf1.winner;
            const finalTeamB_name = matchDetailsData.sf2.winner;
            const finalTeamA_data = csTeamData.find(t => t.name === finalTeamA_name);
            const finalTeamB_data = csTeamData.find(t => t.name === finalTeamB_name);
            
            matchDetailsData['final-1'] = { title: 'Grand Final - Match 1', teams: { teamA: finalTeamA_data, teamB: finalTeamB_data } };
            matchDetailsData['final-2'] = { title: 'Grand Final - Match 2', teams: { teamA: finalTeamA_data, teamB: finalTeamB_data } };
            matchDetailsData['final-3'] = { title: 'Grand Final - Match 3', teams: { teamA: finalTeamA_data, teamB: finalTeamB_data } };

            for (let i = 1; i <= 3; i++) {
                const card = document.createElement('div');
                card.className = 'final-match-card';
                card.dataset.matchId = `final-${i}`;
                card.innerHTML = `
                    <div class="text-center w-full">
                        <p class="font-orbitron text-lg font-bold text-yellow-400 mb-2">Match ${i}</p>
                        <div class="flex items-center justify-around">
                            <div class="matchup-team text-cyan-400">${finalTeamA_name}</div>
                            <div class="vs-glow">VS</div>
                            <div class="matchup-team text-red-400">${finalTeamB_name}</div>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            }
        }
        function createPlayerStatCards() {
            const container = document.getElementById('cs-player-stats-container');
            if (!container) return;
            container.innerHTML = '';
            const sortedPlayers = [...csPlayerStats].sort((a, b) => b.kills - a.kills);

            sortedPlayers.forEach(player => {
                const kd = player.deaths > 0 ? (player.kills / player.deaths).toFixed(2) : player.kills.toFixed(2);
                const card = document.createElement('div');
                card.className = 'player-stat-card text-center';
                card.innerHTML = `
                    <h3 class="font-exo font-bold text-lg truncate">${player.ign}</h3>
                    <p class="text-sm text-text-light font-semibold">${player.team}</p>
                    <div class="mt-2 text-left space-y-1 text-sm">
                        <p class="flex justify-between"><strong>Kills:</strong> <span class="font-bold text-green-500">${player.kills}</span></p>
                        <p class="flex justify-between"><strong>Deaths:</strong> <span class="font-bold text-red-500">${player.deaths}</span></p>
                        <p class="flex justify-between"><strong>K/D:</strong> <span class="font-bold text-blue-500">${kd}</span></p>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        document.addEventListener("DOMContentLoaded", () => {
            const landingPage = document.getElementById('landing-page');
            const leaderboardView = document.getElementById('leaderboard-view');
            const csViewBtn = document.getElementById('cs-view-btn');
            const brViewBtn = document.getElementById('br-view-btn');
            const csView = document.getElementById('cs-view');
            const brView = document.getElementById('br-view');
            const backButton = document.getElementById('back-button');
            const bgAudio = document.getElementById('background-audio');
            const soundToggle = document.getElementById('sound-toggle');
            const volumeContainer = document.querySelector('.volume-container');
            const volumeSlider = document.getElementById('volume-slider');
            const themeToggle = document.getElementById('theme-toggle');
            let isMuted = true;
            let volumeTimeout;

            const showLeaderboard = (viewToShow) => {
                landingPage.classList.add('fade-out');
                setTimeout(() => {
                    leaderboardView.classList.add('visible');
                    if (viewToShow === 'cs') {
                        csView.classList.remove('hidden');
                        brView.classList.add('hidden');
                    } else {
                        brView.classList.remove('hidden');
                        csView.classList.add('hidden');
                    }
                }, 600);
            };

            const hideLeaderboard = () => {
                leaderboardView.classList.remove('visible');
                setTimeout(() => {
                    landingPage.classList.remove('fade-out');
                }, 300);
            };

            csViewBtn.addEventListener('click', () => showLeaderboard('cs'));
            brViewBtn.addEventListener('click', () => showLeaderboard('br'));
            backButton.addEventListener('click', hideLeaderboard);

            bgAudio.volume = 0.5;
            soundToggle.addEventListener('click', () => {
                volumeContainer.classList.toggle('visible');
                if (volumeContainer.classList.contains('visible')) {
                    clearTimeout(volumeTimeout);
                    volumeTimeout = setTimeout(() => volumeContainer.classList.remove('visible'), 3000);
                }
            });
            volumeSlider.addEventListener('input', (e) => {
                clearTimeout(volumeTimeout);
                bgAudio.volume = e.target.value;
                bgAudio.muted = e.target.value == 0;
                isMuted = e.target.value == 0;
                soundToggle.innerHTML = isMuted ? '<i class="fas fa-volume-mute"></i>' : '<i class="fas fa-volume-up"></i>';
                volumeTimeout = setTimeout(() => volumeContainer.classList.remove('visible'), 3000);
            });
            
            document.body.addEventListener('click', () => {
                if(bgAudio.paused) bgAudio.play().catch(e => console.log("Audio autoplay was prevented by browser."));
            }, { once: true });
            
            const applyTheme = (theme) => {
                if (theme === 'dark') {
                    document.documentElement.classList.add('dark');
                    themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                } else {
                    document.documentElement.classList.remove('dark');
                    themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                }
            };
            themeToggle.addEventListener('click', () => {
                const newTheme = document.documentElement.classList.contains('dark') ? 'light' : 'dark';
                localStorage.setItem('theme', newTheme);
                applyTheme(newTheme);
            });
            const savedTheme = localStorage.getItem('theme');
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (savedTheme) { applyTheme(savedTheme); } else if (systemPrefersDark) { applyTheme('dark'); } else { applyTheme('light'); }

            const loader = document.getElementById('loader');
            
            // Semi-final fade effect logic
            const semiFinalContainer = document.getElementById('semi-final-cards-container');
            if (semiFinalContainer) {
                const semiCards = semiFinalContainer.querySelectorAll('.matchup-card');
                let currentCard = 0;
                let semiInterval = setInterval(() => {
                    semiCards[currentCard].classList.remove('active');
                    currentCard = (currentCard + 1) % semiCards.length;
                    semiCards[currentCard].classList.add('active');
                }, 5000);

                semiFinalContainer.addEventListener('mouseenter', () => clearInterval(semiInterval));
                semiFinalContainer.addEventListener('mouseleave', () => {
                     if(semiInterval) clearInterval(semiInterval);
                    semiInterval = setInterval(() => {
                        semiCards[currentCard].classList.remove('active');
                        currentCard = (currentCard + 1) % semiCards.length;
                        semiCards[currentCard].classList.add('active');
                    }, 5000);
                });
            }

            calculateKillLeaders();
            createFinalsCards();
            createPlayerStatCards();
            processAndDisplayLeaderboard("cs-leaderboard-body", csTeamData, true);
            processAndDisplayLeaderboard("br-leaderboard-body", brTeamData, false);
            createMapHighlights();
            createKillLeaderCards(csKillLeaders, "cs-kill-leaders-container");
            createKillLeaderCards(brKillLeaders, "br-kill-leaders-container");
            setupModalListeners(); // Must be after createFinalsCards
            setupPausingScroller("map-scroller");
            setupContinuousScroller("cs-kill-leaders-container");
            setupContinuousScroller("br-kill-leaders-container");
            setupContinuousScroller("cs-finals-container");
            updateTimestamp();
            setInterval(updateTimestamp, 1000);

            const quotes = [
                "'The only way to do great work is to love what you do.' - Steve Jobs",
                "'Victory is sweetest when you\\'ve known defeat.' - Malcolm S. Forbes",
                "'It\\'s not whether you get knocked down, it\\'s whether you get up.' - Vince Lombardi"
            ];
            const quotesText = document.getElementById("quotes-text");
            let quoteIndex = 0;

            function cycleQuotes() {
                if(!quotesText) return;
                quotesText.classList.remove("active");
                setTimeout(() => {
                    quoteIndex = (quoteIndex + 1) % quotes.length;
                    quotesText.textContent = quotes[quoteIndex];
                    quotesText.classList.add("active");
                }, 1000);
            }
            if(quotesText) quotesText.textContent = quotes[quoteIndex];
            
            const revealElements = document.querySelectorAll('.reveal-on-scroll');
            const revealObserver = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('revealed');
                    }
                });
            }, { threshold: 0.2 });
            revealElements.forEach(el => revealObserver.observe(el));

            setTimeout(() => {
                if (loader) loader.classList.add('hidden');
                setInterval(cycleQuotes, 5000);
            }, 2500);
        });
    </script>
</body>
</html>

